syntax = "proto3";

package text_service;

option go_package = "pkg/api/text-service";

service Text{
  rpc CreateClass(CreateClassRequest) returns (CreateClassResponse);
  rpc GetClass(GetClassRequest) returns (GetClassResponse);
  rpc GetClasses(GetClassesRequest) returns (GetClassesResponse);
  rpc AddSubjectInClass(AddSubjectInClassRequest) returns (AddSubjectInClassResponse);
  rpc RemoveSubjectFromClass(RemoveSubjectFromClassRequest) returns (RemoveSubjectFromClassResponse);
  rpc DeleteClass(DeleteClassRequest) returns (DeleteClassResponse);

  rpc CreateSubject(CreateSubjectRequest) returns (CreateSubjectResponse);
  rpc GetSubject(GetSubjectRequest) returns (GetSubjectResponse);
  rpc GetSubjects(GetSubjectsRequest) returns (GetSubjectsResponse);
  rpc AddSectionInSubject(AddSectionInSubjectRequest) returns (AddSectionInSubjectResponse);
  rpc RemoveSectionFromSubject(RemoveSectionFromSubjectRequest) returns (RemoveSectionFromSubjectResponse);
  rpc DeleteSubject(DeleteSubjectRequest) returns (DeleteSubjectResponse);

  rpc CreateSection(CreateSectionRequest) returns (CreateSectionResponse);
  rpc GetSection(GetSectionRequest) returns (GetSectionResponse);

  rpc CreateLesson(CreateLessonRequest) returns (CreateLessonResponse);
  rpc GetLesson(GetLessonRequest) returns (GetLessonResponse);
}

//---------------------------------------------------------------------------------------------------------------------------------
// Class

message Class{
  int32 class_number = 1;
  repeated string subject_ids = 2;
}

// Create

message CreateClassRequest{
  Class class = 1;
}

message CreateClassResponse{
  string response = 1;
}

// Read

message GetClassRequest{
  int32 class_number = 1;
}

message GetClassResponse{
  Class class = 1;
}

message GetClassesRequest{}

message GetClassesResponse{
  repeated Class classes = 1;
}

// Update

message AddSubjectInClassRequest{
  int32 class_number = 1;
  repeated string subject_ids = 2;
}

message AddSubjectInClassResponse{
  string response = 1;
}

message RemoveSubjectFromClassRequest{
  int32 class_number = 1;
  string subject_id = 2;
}

message RemoveSubjectFromClassResponse{
  string response = 1;
}

// Delete

message DeleteClassRequest{
  int32 number = 1;
}

message DeleteClassResponse{
  string response = 1;
}

//---------------------------------------------------------------------------------------------------------------------------------
// Subject

message Subject{
  string id = 1;
  int32 classNumber = 2;
  string name = 3;
  repeated string section_ids = 4;
}

message CreateSubjectRequest{
    Subject subject = 1;
}

message CreateSubjectResponse{
    string response = 1;
}

message GetSubjectRequest{
    string id = 1;
}

message GetSubjectResponse{
    Subject subject = 1;
}

message GetSubjectsRequest{}

message GetSubjectsResponse{
    repeated Subject subjects = 1;
}

message AddSectionInSubjectRequest{
  string subject_id = 1;
  repeated string section_ids = 2;
}

message AddSectionInSubjectResponse{
  string response = 1;
}

message RemoveSectionFromSubjectRequest{
  string subject_id = 1;
  string section_id = 2;
}

message RemoveSectionFromSubjectResponse{
  string response = 1;
}

message DeleteSubjectRequest{
  string id = 1;
}

message DeleteSubjectResponse{
  string response = 1;
}

//---------------------------------------------------------------------------------------------------------------------------------
// Section

message Section{
  string id = 1;
  string subjectId = 2;
  string name = 3;
  string description = 4;
  repeated string lessons_ids = 5;
}

message CreateSectionRequest{
    Section section = 1;
}

message CreateSectionResponse{
    string response = 1;
}

message GetSectionRequest{
    string id = 1;
}

message GetSectionResponse{
    Section section = 1;
}

//---------------------------------------------------------------------------------------------------------------------------------
// Lesson

message Lesson{
  string id = 1;
  string sectionId = 2;
  string name = 3;
  string description = 4;
  repeated string video_ids = 5;
  repeated string file_ids = 6;
  repeated string exercise_ids = 7;
  repeated string comment_ids = 8;
  int32 rating = 9;
}

message CreateLessonRequest{
    Lesson lesson = 1;
}

message CreateLessonResponse{
    string response = 1;
}

message GetLessonRequest{
    string id = 1;
}

message GetLessonResponse{
    Lesson lesson = 1;
}
